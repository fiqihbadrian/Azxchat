{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/permanent_marker_e1ffe20d.module.css [ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"className\": \"permanent_marker_e1ffe20d-module__Y9ZX8G__className\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/permanent_marker_e1ffe20d.js"],"sourcesContent":["import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22index.tsx%22,%22import%22:%22Permanent_Marker%22,%22arguments%22:[{%22subsets%22:[%22latin%22],%22weight%22:%22400%22}],%22variableName%22:%22graffitiFont%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Permanent Marker', 'Permanent Marker Fallback'\",\n        fontWeight: 400,\nfontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,WAAW;IACb,WAAW,oKAAS,CAAC,SAAS;IAC9B,OAAO;QACH,YAAY;QACZ,YAAY;QACpB,WAAW;IAEP;AACJ;AAEA,IAAI,oKAAS,CAAC,QAAQ,IAAI,MAAM;IAC5B,SAAS,QAAQ,GAAG,oKAAS,CAAC,QAAQ;AAC1C;uCAEe","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbook/Documents/Project/WEB/azxchat/Azxchat/src/pages/index.tsx"],"sourcesContent":["import { useState, useEffect, useRef } from \"react\";\nimport SocketIOClient, { Socket } from \"socket.io-client\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faBars, faTimes, faSmile, faPaperPlane, faArrowDown } from \"@fortawesome/free-solid-svg-icons\";\nimport Image from \"next/image\";\nimport { Permanent_Marker } from \"next/font/google\";\n\n\nconst graffitiFont = Permanent_Marker({ subsets: ['latin'], weight: '400' });\n\ninterface IMsg {\n  user: string;\n  msg: string;\n}\n\ninterface IUser {\n  id: string;\n  name: string;\n}\n\n\nexport default function Home() {\n  const inputRef = useRef<HTMLInputElement>(null!);\n  const chatContainerRef = useRef<HTMLDivElement>(null!);\n  const socketRef = useRef<typeof Socket | null>(null);\n\n  const [chat, setChat] = useState<IMsg[]>([]);\n  const [msg, setMsg] = useState<string>(\"\");\n  const [user, setUser] = useState<string>(\"\");\n  const [isLoggedIn, setIsLoggedIn] = useState<boolean>(false);\n  const [users, setUsers] = useState<IUser[]>([]);\n  const [systemMessage, setSystemMessage] = useState<string>(\"\");\n  const [showEmotePopup, setShowEmotePopup] = useState(false);\n  const [isScrolled, setIsScrolled] = useState(false);\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n\n  const scrollToBottom = () => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTo({ top: chatContainerRef.current.scrollHeight, behavior: \"smooth\" });\n    }\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [chat]);\n\n  const handleScroll = () => {\n    if (chatContainerRef.current) {\n      const { scrollTop, scrollHeight, clientHeight } = chatContainerRef.current;\n      const isAtBottom = scrollTop + clientHeight >= scrollHeight - 10;\n      setIsScrolled(!isAtBottom);\n    }\n  };\n\n  useEffect(() => {\n    if (isLoggedIn) {\n      socketRef.current = SocketIOClient(process.env.BASE_URL as string, { path: \"/api/socket\" });\n\n      socketRef.current.on(\"connect\", () => {\n        console.log(\"SOCKET CONNECTED!\", socketRef.current?.id);\n        socketRef.current?.emit(\"userJoined\", user);\n        setUsers((prevUsers) => [\n          ...prevUsers,\n          { id: socketRef.current?.id ?? \"\", name: user }\n        ]);\n      });\n\n      socketRef.current.on(\"userJoined\", (newUser: IUser) => {\n        setUsers((prevUsers) => {\n          if (prevUsers.some((u) => u.id === newUser.id)) return prevUsers;\n          return [...prevUsers, newUser];\n        });\n        setSystemMessage(`${newUser.name} has joined the chat.`);\n        setTimeout(() => setSystemMessage(\"\"), 3000);\n      });\n\n      socketRef.current.on(\"userLeft\", (userId: string) => {\n        setUsers((prevUsers) => prevUsers.filter((u) => u.id !== userId));\n      });\n\n      socketRef.current.on(\"users\", (updatedUsers: IUser[]) => {\n        setUsers(updatedUsers);\n      });\n\n      socketRef.current.on(\"message\", (message: IMsg) => {\n        if (message.user === \"System\") {\n          setSystemMessage(message.msg);\n          setTimeout(() => setSystemMessage(\"\"), 3000);\n        } else {\n          setChat((chat) => [...chat, message]);\n        }\n      });\n\n      return () => {\n        if (socketRef.current) {\n          socketRef.current.emit(\"userLeft\", socketRef.current.id);\n          socketRef.current.disconnect();\n        }\n      };\n    }\n  }, [isLoggedIn, user]);\n\n  const sendMessage = async () => {\n    if (msg.trim()) {\n      const message: IMsg = { user, msg };\n\n      socketRef.current?.emit(\"message\", message);\n\n      try {\n        const resp = await fetch(`/api/socket`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(message)\n        });\n\n        if (resp.ok) {\n          setMsg(\"\");\n        } else {\n          console.error(\"Failed to send message to API\");\n        }\n      } catch (error) {\n        console.error(\"Error while sending message:\", error);\n      } finally {\n        setMsg(\"\");\n        inputRef.current?.focus();\n      }\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col w-full h-screen bg-base-200\">\n      {!isLoggedIn ? (\n        <div className=\"flex flex-col justify-center items-center h-full w-full\">\n          <Image src=\"/images/logo.png\" alt=\"Logo\" width={100} height={100} className=\"mb-4\" />\n          <h1 className=\"text-3xl font-semibold text-white mb-4\">Login to Chat</h1>\n          <input\n            type=\"text\"\n            placeholder=\"Enter your name\"\n            className=\"input input-bordered bg-base-300 text-white p-2 rounded mt-4 mb-4 w-60 sm:w-80\"\n            onChange={(e) => setUser(e.target.value)}\n            value={user}\n            onKeyPress={(e) => {\n              if (e.key === \"Enter\" && user) setIsLoggedIn(true);\n            }}\n          />\n          <button\n            onClick={() => user && setIsLoggedIn(true)}\n            className=\"btn btn-success text-black mt-4 w-60 sm:w-80\"\n          >\n            Login\n          </button>\n        </div>\n      ) : (\n        <div className=\"flex w-full\">\n          {/* Sidebar */}\n          <div\n            className={`fixed lg:static transition-transform transform ${\n              isSidebarOpen ? \"translate-x-0\" : \"-translate-x-full\"\n            } lg:translate-x-0 w-64 lg:w-1/4 bg-base-300 p-4 h-screen z-50`}\n          >\n            <button\n              className=\"lg:hidden absolute top-4 right-4 text-white\"\n              onClick={() => setIsSidebarOpen(false)}\n            >\n              <FontAwesomeIcon icon={faTimes} size=\"lg\" />\n            </button>\n            <div className=\"flex items-center mb-5\">\n              <Image src=\"/images/logo.png\" alt=\"Logo Vercel\" width={100} height={100} />\n              <h1 className={`${graffitiFont.className} text-success text-xl font-bold`}>AZXchat</h1>\n            </div>\n            <h4 className=\"text-xl text-white mb-4\">Users</h4>\n            <ul className=\"overflow-y-auto h-full\">\n              {users\n                .filter((user, index, self) => self.findIndex((u) => u.id === user.id) === index)\n                .map((u) => (\n                  <li\n                    key={u.id}\n                    className={`text-white p-2 rounded mb-2 ${u.name === user ? \"font-semibold bg-base-100\" : \"\"} hover:bg-base-200`}\n                  >\n                    {u.name}\n                  </li>\n                ))}\n            </ul>\n          </div>\n\n          {/* Hamburger Button */}\n          <button\n            className=\"lg:hidden fixed top-4 left-4 text-white z-50\"\n            onClick={() => setIsSidebarOpen(true)}\n          >\n            <FontAwesomeIcon icon={faBars} size=\"lg\" />\n          </button>\n\n          <div className=\"flex-1 flex flex-col h-screen\">\n            {/* Chat Container */}\n            <div className=\"p-4 bg-base-100\">\n              {systemMessage && <div className=\"text-center text-sm text-gray-500 mb-3\">{systemMessage}</div>}\n            </div>\n            <div\n              className=\"flex-1 overflow-y-auto p-4 bg-base-100\"\n              ref={chatContainerRef}\n              onScroll={handleScroll}\n            >\n              {chat.map((message, index) => (\n                <div key={index} className=\"flex items-center my-2\">\n                  <div className=\"text-sm text-base-400 mr-2\">{message.user}:</div>\n                  <div className=\"bg-base-300 p-2 rounded text-white\">{message.msg}</div>\n                </div>\n              ))}\n            </div>\n            {isScrolled && (\n              <button onClick={scrollToBottom} className=\"btn btn-circle btn-success fixed bottom-20 right-11 z-10\">\n                <FontAwesomeIcon icon={faArrowDown} />\n              </button>\n            )}\n            <div className=\"p-4 bg-base-200\">\n              <div className=\"flex items-center\">\n                <button\n                  className=\"btn btn-default mr-2\"\n                  onClick={() => setShowEmotePopup(!showEmotePopup)}\n                >\n                  <FontAwesomeIcon icon={faSmile} />\n                </button>\n                {showEmotePopup && (\n                  <div className=\"absolute bottom-16 bg-base-300 p-2 rounded shadow-lg\">\n                    <div className=\"grid grid-cols-6 gap-2\">\n                      {[\"ðŸ˜€\", \"ðŸ˜‚\", \"ðŸ˜\", \"ðŸ˜Ž\", \"ðŸ˜¢\", \"ðŸ˜¡\"].map((emote) => (\n                        <span\n                          key={emote}\n                          onClick={() => {\n                            setMsg(msg + emote);\n                            setShowEmotePopup(false);\n                          }}\n                          className=\"cursor-pointer text-xl\"\n                        >\n                          {emote}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                <input\n                  ref={inputRef}\n                  type=\"text\"\n                  placeholder=\"Type here\"\n                  value={msg}\n                  onChange={(e) => setMsg(e.target.value)}\n                  onKeyDown={(e) => {\n                    if (e.key === \"Enter\" && msg.trim()) {\n                      sendMessage();\n                    }\n                  }}\n                  className=\"text-white input input-bordered w-full h-12\"\n                />\n                <button onClick={sendMessage} className=\"btn btn-success ml-4 p-2 rounded-full\">\n                  <FontAwesomeIcon icon={faPaperPlane} />\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}